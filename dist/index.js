function t(t){if("string"!=typeof t&&"symbol"!=typeof t)throw new TypeError(" EVENTNAME expected: string | symbol;but invalid :"+t)}function e(t){if("function"!=typeof t)throw new TypeError(" EVENTLISTENER expected: (event?: any) => void;but invalid:"+t)}const n="EventEmitterTarget";function i(){return{}.toString.call({[Symbol.toStringTag]:n})}export default function o(){const r=function(){const o=new Map,r=new WeakMap;function s(t){let e=o.get(t);return e||(e=new Set,o.set(t,e)),e}function c(e){if(t(e),o.has(e)){s(e).clear()}}function f(e,n){if(t(e),o.has(e)){s(e).forEach(t=>{Promise.resolve().then(()=>{t(n)})})}}function u(n,i){t(n),e(i),s(n).add(i)}function a(n,i){t(n),e(i);const o=s(n);o.delete(i);let c=r.get(i);c&&o.delete(c)}return{[Symbol.toPrimitive]:i,[Symbol.toStringTag]:n,[Symbol.iterator]:function(){return[...o].map(([t,e])=>[t,[...e]])},listenerCount:function(e){if(t(e),o.has(e)){return s(e).size}return 0},clear:c,removeAllListeners:c,on:u,addListener:u,off:a,removeListener:a,once:function(n,i){t(n),e(i);let o=!1,s=r.get(i);if(!s){const t=e=>{a(n,t),a(n,i),o||(o=!0,i(e))};s=t,r.set(i,s)}u(n,s),a(n,i)},emit:f,dispatch:f,eventNames:function(){return[...o.keys()]},listeners:function(e){if(t(e),o.has(e)){return[...s(e)]}return[]}}}();return this&&this instanceof o?(Object.assign(this,r),this):Reflect.construct(o,[])}
//# sourceMappingURL=index.js.map
