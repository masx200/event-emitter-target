function t(t){if("string"!=typeof t&&"symbol"!=typeof t)throw new TypeError(" EVENTNAME expected: string | symbol;but invalid :"+t)}function e(t){if("function"!=typeof t)throw new TypeError(" EVENTLISTENER expected: (event?: any) => void;but invalid:"+t)}const n="EventEmitterTarget";function o(){return{}.toString.call({[Symbol.toStringTag]:n})}export default function i(){const r=function(){const i=new Map,r=new WeakMap;function c(t){let e=i.get(t);return e||(e=new Set,i.set(t,e)),e}function s(e){t(e),i.has(e)&&c(e).clear()}function u(e,n){t(e),i.has(e)&&c(e).forEach(t=>{Promise.resolve().then(()=>{t(n)})})}function f(n,o){t(n),e(o),c(n).add(o)}function a(t,e){c(t).delete(e)}function l(n,o){t(n),e(o),a(n,o),function(t,e){const n=c(t);let o=r.get(e);o&&n.delete(o)}(n,o)}return{[Symbol.toPrimitive]:o,[Symbol.toStringTag]:n,[Symbol.iterator]:function(){return[...i].map(([t,e])=>[t,[...e]])[Symbol.iterator]()},listenerCount:function(e){return t(e),i.has(e)?c(e).size:0},clear:s,removeAllListeners:s,on:f,addListener:f,off:l,removeListener:l,once:function(n,o){t(n),e(o);let i=!1,c=r.get(o);if(!c){const t=e=>{a(n,t),a(n,o),i||(i=!0,o(e))};c=t,r.set(o,c)}a(n,o),f(n,c)},emit:u,dispatch:u,eventNames:function(){return[...i.keys()]},listeners:function(e){return t(e),i.has(e)?[...c(e)]:[]}}}();return this&&this instanceof i?(Object.assign(this,r),this):Reflect.construct(i,[])}
//# sourceMappingURL=index.js.map
